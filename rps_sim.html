<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.10.0/p5.min.js"></script>
    <title>Document</title>
</head>

<body>
    <script>
        let emojis = [];
        let emojiSize = 32; // è¨­å®š emoji çš„å°ºå¯¸
        let types = ['âœ‚ï¸', 'ğŸª¨', 'ğŸ“„'];
        let typeColors = { 'âœ‚ï¸': '#ff6666', 'ğŸª¨': '#66b2ff', 'ğŸ“„': '#99ff99' };
        let typeCount={'âœ‚ï¸':0, 'ğŸª¨':0, 'ğŸ“„':0};
        let i = 0;
        function mouseClicked(event) {
            for (let emoji of emojis) {
                if (mouseX >= emoji.x && mouseY >= emoji.y && mouseX <= emoji.x + emojiSize && mouseY <= emoji.y + emojiSize) {
                    emoji.type = types[(types.findIndex(ele=>ele === emoji.type)+1)%3];
                }
            }
        }

        function setup() {
            createCanvas(windowWidth, windowHeight);
            for (let i = 0; i < 50; i++) {
                for (let type of types) {
                    let x = random(emojiSize, width - emojiSize);
                    let y = random(emojiSize, height - emojiSize);
                    let emoji = new Emoji(x, y, type);
                    emojis.push(emoji);
                }
            }
        }

        function draw() {
            background(255);
            for (let emoji of emojis) {
                emoji.move();
                emoji.checkCollision(emojis);
                emoji.display();
            }
            for(let type of types) {
                typeCount[type]=emojis.filter(e=>e.type===type).length;
            }
            let status = `âœ‚ï¸ ${typeCount['âœ‚ï¸']} ğŸª¨ ${typeCount['ğŸª¨']} ğŸ“„ ${typeCount['ğŸ“„']}`;
            textAlign(LEFT, TOP);
            fill(0)
            text(status,0,0);
        }

        class Emoji {
            constructor(x, y, type) {
                this.x = x;
                this.y = y;
                this.type = type;
                this.vx = random(-5, 5);
                this.vy = random(-5, 5);
            }

            move() {
                this.x += this.vx;
                this.y += this.vy;

                // é‚Šç•Œæª¢æŸ¥
                if (this.x < 0 || this.x > width - emojiSize) this.vx *= -1;
                if (this.y < 0 || this.y > height - emojiSize) this.vy *= -1;
            }

            checkCollision(others) {
                for (let other of others) {
                    if (other !== this && this.isCollidingWith(other)) {
                        this.handleCollision(other);
                    }
                }
            }

            isCollidingWith(other) {
                let d = dist(this.x, this.y, other.x, other.y);
                return d < emojiSize;
            }

            handleCollision(other) {
                if (this.type !== other.type) {
                    // ä¸åŒå‰‡æ¯”è¼ƒï¼Œè¼¸è€…è®Šæˆè´è€…çš„é¡å‹ï¼Œä¸¦ä¸”åå½ˆ
                    if (
                        (this.type === 'âœ‚ï¸' && other.type === 'ğŸ“„') ||
                        (this.type === 'ğŸª¨' && other.type === 'âœ‚ï¸') ||
                        (this.type === 'ğŸ“„' && other.type === 'ğŸª¨')
                    ) {
                        other.type = this.type;
                        this.vx *= -1;
                        this.vy *= -1;
                        other.vx *= -1;
                        other.vy *= -1;
                    } else {
                        this.type = other.type;
                        this.vx *= -1;
                        this.vy *= -1;
                        other.vx *= -1;
                        other.vy *= -1;
                    }
                }
                // å¦‚æœåœ–æ¡ˆç›¸åŒï¼Œä»€éº¼éƒ½ä¸åšï¼Œç›´æ¥ç©¿é
            }

            display() {
                textSize(emojiSize);
                textAlign(CENTER, CENTER);
                fill(typeColors[this.type]);
                text(this.type, this.x + emojiSize / 2, this.y + emojiSize / 2);
            }
        }
    </script>
</body>

</html>